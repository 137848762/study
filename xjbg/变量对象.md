JS执行一段可执行的代码，就会创建对应的执行上下文。

每一个执行执行上下文，都会对应一个三个属性：

- 变量对象
- 作用域链
- this

## 变量对象

变量对象是与执行上下文相关的数据作用域，存储了在上下文中定义的**变量**和**函数声明**。


## 全局上下文

全局上下文的变量对象就是全局对象


## 函数上下文

在函数上下文中，我们用活动对象（AO）来表示变量对象。活动对象和变量对象是一个东西，只是变量对象是规范上的或者说是引擎实现的。不可在JS环境中访问，只有当进入一个执行上下文中，这个执行上下文的变量对象才会被激活，所以叫AO。

活动对象是在进入函数上下文的时候被创建的，它通过函数的arguments属性初始化。


## 执行过程

执行上下文的代码会分成两个阶段进行：进入和执行

- 进入执行上下文
- 执行代码


### 进入执行上下文

当进入执行上下文的时候，还没有执行代码。

变量对象会包括：

1. 函数的所有形参
2. 函数声明
3. 变量声明

例子如下：

```
function foo(a) {
  var b = 2
  function c() {}
  var d = function() {}
  b = 3
}

foo(1)
```

在进入执行上下文后，这个时候的AO是：

```
AO = {
  arguments: {
    0: 1,
    length: 1
  },
  a: 1,
  b: undefined,
  c: reference to function c() {},
  d: undefined
}
```


### 代码执行

在代码执行阶段，会顺序执行代码。根据代码，修改变量对象的值。当代码执行完毕以后，AO如下：

```
AO = {
  arguments: {
    0: 1,
    length: 1
  },
  a: 1,
  b: 3,
  c: reference to c(){},
  d: reference to FunctonExpression "d"
}
```

## 总结

1. 全局上下文的变量对象就是全局对象
2. 函数上下问的变量初始化值包括Arguments对象
3. 在进入执行上下文时会被变量对象添加形参、函数声明、变量尚明等初始化的属性值
4. 执行代码
