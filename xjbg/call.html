<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>call apply</title>
</head>
<body>
<script>

  // Function.prototype.myCall = function(ctx, ...args) {
  //   ctx = ctx || window
  //   ctx.fn = this
  //   const result = ctx.fn(...args)
  //   delete ctx.fn
  //   return result
  // }

  // Function.prototype.myApply = function(ctx, args) {
  //   ctx = ctx || window

  //   ctx.fn = this
  //   const result = ctx.fn(...args)
  //   delete ctx.fn
  //   return result
  // }

  // const obj = {
  //   name: '老王'
  // }

  // function say(age, sex) {
  //   // console.log(this.name, '年龄是:' + age, '性别:' + sex)
  //   return '1111'
  // }

  // Function.prototype.myBind = function(ctx, ...args) {
  //   const self = this
  //   const fBound = function(...innerArgs) {
  //     return self.apply(this instanceof fBound ? this : ctx, args.concat(innerArgs))
  //   }
  //   return fBound
  // }

  // const obj = {
  //   name: '老王'
  // }

  // function say(age, sex) {
  //   // console.log(this.name, '年龄是:' + age, '性别:' + sex)
  //   return '1111'
  // }

  // const sayName = say.myBind(obj, '18')
  // new sayName()

  // // console.log(say.myCall(obj, '18', '男'))
  // // console.log(say.myApply(obj, ['18', '男']))

  

//================================================再来一次==============================================================

Function.prototype._call = function(ctx, ...args) {
  ctx.fn = this || window

  let result = ctx.fn(...args)

  delete ctx.fn

  return result
}


function foo(age) {
  console.log(this.name, age)
  return 111
}

let obj = {
  name: '老王'
}

console.log(foo._call(obj, 18))




</script>
</body>
</html>